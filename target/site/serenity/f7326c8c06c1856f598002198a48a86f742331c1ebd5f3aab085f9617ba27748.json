{"name":"un usuario/a registrado en datacredito desea ser validado en un banco aval","id":"autenticacion;un-usuario/a-registrado-en-datacredito-desea-ser-validado-en-un-banco-aval;;2","testSteps":[{"number":1,"description":"un usuario/a registrado en datacredito desea ser validado en un banco aval #1: {banco\u003dazul}","duration":3686,"startTime":"2018-10-17T15:26:27.848-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"children":[{"number":2,"description":"Given un usuario que esta registrado en datacredito solicita validacion en el banco azul","duration":7,"startTime":"2018-10-17T15:26:27.848-05:00[America/Bogota]","result":"SUCCESS","precondition":false},{"number":3,"description":"When el envia la peticion para ser autenticado","duration":3648,"startTime":"2018-10-17T15:26:27.855-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"children":[{"number":4,"description":"POST http://10.130.2.131:5133/id-now-services-snapshot/api/securityManagement/v7/Authentication","duration":0,"startTime":"2018-10-17T15:26:31.503-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"http://10.130.2.131:5133/id-now-services-snapshot/api/securityManagement/v7/Authentication","content":"{\n    \"govIssueIdent\": {\n        \"govIssueIdentType\": \"CC\",\n        \"govOrg\": \"string\",\n        \"stateProv\": \"string\",\n        \"country\": \"string\",\n        \"issDt\": \"2018-07-27T19:56:26.781Z\",\n        \"identSerialNum\": 19218095,\n        \"govOrgName\": \"string\",\n        \"expDt\": \"2018-07-27T19:56:26.781Z\",\n        \"govRank\": \"string\",\n        \"desc\": \"string\"\n    },\n    \"personName\": {\n        \"legalName\": \"Adriana\",\n        \"lastName\": \"FORERO\",\n        \"firstName\": \"Luz\",\n        \"nickname\": \"lquintero@ath.com.co\",\n        \"nameSuffix\": \"string\",\n        \"middleName\": \"Adriana\",\n        \"titlePrefix\": \"string\"\n    },\n    \"refInfo\": [\n        {\n            \"refType\": \"string\",\n            \"refId\": \"string\"\n        }\n    ],\n    \"creditAnalysis\": {\n        \"score\": 0\n    },\n    \"contactInfo\": {\n        \"prefTimeStart\": \"2018-07-27T19:56:26.781Z\",\n        \"contactName\": \"string\",\n        \"emailAddr\": \"string\",\n        \"postAddr\": {\n            \"Addr3\": \"string\",\n            \"stateProv\": \"string\",\n            \"Addr4\": \"string\",\n            \"StartDt\": \"2018-07-27T19:56:26.782Z\",\n            \"Addr1\": \"string\",\n            \"Addr2\": \"string\",\n            \"EndDt\": \"2018-07-27T19:56:26.782Z\",\n            \"city\": \"string\",\n            \"AddrType\": \"string\",\n            \"PostalCode\": 0,\n            \"Country\": \"string\"\n        },\n        \"prefTimeEnd\": \"2018-07-27T19:56:26.781Z\",\n        \"phoneNum\": {\n            \"phoneType\": \"string\",\n            \"phone\": \"3005501111\"\n        },\n        \"contactPref\": \"string\",\n        \"url\": \"string\"\n    },\n    \"depAcctId\": {\n        \"AcctCur\": \"string\",\n        \"AcctKey\": \"string\",\n        \"AcctId\": \"string\",\n        \"AcctType\": \"DDA\",\n        \"BankInfo\": {\n            \"stateProv\": \"string\",\n            \"refInfo\": {\n                \"refType\": \"string\",\n                \"refId\": \"string\"\n            },\n            \"branchId\": \"string\",\n            \"country\": \"string\",\n            \"bankId\": 0,\n            \"bankIdType\": \"string\",\n            \"city\": \"string\",\n            \"postAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"postalCode\": 0,\n            \"name\": \"string\",\n            \"branchName\": \"string\"\n        }\n    },\n    \"cardAcctId\": {\n        \"cardMagData\": {\n            \"MagData3\": \"string\",\n            \"MagData1\": \"string\",\n            \"MagData2\": \"string\"\n        },\n        \"acctType\": \"DDA\",\n        \"acctId\": \"string\",\n        \"CCMotoAcct\": {\n            \"CardVrfyData\": \"string\",\n            \"PostAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"phone\": 0,\n            \"postalCode\": 0,\n            \"ExpDt\": \"2018-07-27T19:56:26.781Z\",\n            \"brand\": \"string\",\n            \"Name\": \"string\"\n        }\n    },\n    \"loanAcctId\": {\n        \"bankInfo\": {\n            \"stateProv\": \"string\",\n            \"refInfo\": {\n                \"refType\": \"string\",\n                \"refId\": \"string\"\n            },\n            \"branchId\": \"string\",\n            \"country\": \"string\",\n            \"bankId\": 0,\n            \"bankIdType\": \"string\",\n            \"city\": \"string\",\n            \"postAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"postalCode\": 0,\n            \"name\": \"string\",\n            \"branchName\": \"string\"\n        },\n        \"acctType\": \"DDA\",\n        \"acctId\": \"string\"\n    },\n    \"otpInfo\": {\n        \"channel\": \"string\",\n        \"amt\": \"string\",\n        \"otpNum\": \"string\",\n        \"validity\": {\n            \"validityPeriod\": \"Año\",\n            \"ValidityTime\": 0\n        },\n        \"otpType\": \"TS\",\n        \"desc\": \"su  otp fue generada:\"\n    },\n    \"transaction\": {\n        \"trnRqUID\": \"string\",\n        \"trnType\": \"string\",\n        \"trnSrc\": \"string\"\n    },\n    \"signonPswd\": {\n        \"custPswd\": {\n            \"cryptType\": \"string\",\n            \"pswd\": \"string\"\n        },\n        \"signonRole\": \"string\",\n        \"custId\": {\n            \"custPermId\": \"string\",\n            \"SPName\": \"string\",\n            \"custLoginId\": \"string\"\n        },\n        \"genSessKey\": true\n    }\n}","contentType":"application/json","requestHeaders":"X-RqUID\u003d809784\n\t\t\t\tX-Channel\u003dADL\n\t\t\t\tX-BankId\u003d00010236\n\t\t\t\tX-IdentSerialNum\u003d0\n\t\t\t\tX-IPAddr\u003d127.0.0.1\n\t\t\t\tX-Sesskey\u003dsessionKey\n\t\t\t\tX-Backend\u003dElectronicSigInq\n\t\t\t\tX-OperationName\u003dautenticacion\n\t\t\t\tX-ServiceName\u003dautenticacion\n\t\t\t\tX-govIssueIdentType\u003dCC\n\t\t\t\tAccept\u003dapplication/json\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"X-Backside-Transport: OK OK\nConnection: Keep-Alive\nTransfer-Encoding: chunked\nDate: Wed, 17 Oct 2018 20:26:27 GMT\nContent-Type: application/json\nHost_code: \nstatusDes: \nX-Global-Transaction-ID: 1d78824b5bc79af301b0e0c7","responseCookies":"","responseBody":"{\n    \"msgRsHdr\": {\n        \"RqUID\": null,\n        \"Status\": {\n            \"StatusCode\": 500,\n            \"ServerStatusCode\": \"-1\",\n            \"Severity\": null,\n            \"StatusDesc\": \"Error El cliente ya ha generado una OTP y esta pendiente de validar\",\n            \"AdditionalStatus\": null\n        },\n        \"EndDt\": null,\n        \"ApprovalId\": null,\n        \"Fee\": null\n    },\n    \"otpInfo\": null,\n    \"personInfo\": null,\n    \"bankInfo\": {\n        \"bankIdType\": null,\n        \"bankId\": \"00010236\",\n        \"refInfo\": null,\n        \"name\": null,\n        \"branchId\": null,\n        \"branchName\": null,\n        \"postAddr\": null,\n        \"city\": null,\n        \"stateProv\": null,\n        \"postalCode\": null,\n        \"country\": null\n    },\n    \"trnImage\": null\n}","statusCode":200},"precondition":false}]},{"number":5,"description":"Then La peticion debe ser contestada por datacredito","duration":31,"startTime":"2018-10-17T15:26:31.503-05:00[America/Bogota]","exception":{"errorType":"java.lang.AssertionError","message":"\nExpected: \u003c0\u003e\n     but: was \u003c500\u003e","stackTrace":[{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationAssertions","methodName":"shouldSeeCodeDatacredito","fileName":"AuthenticationAssertions.java","lineNumber":31},{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationStepsDefinition","methodName":"requestDatacredito","fileName":"AuthenticationStepsDefinition.java","lineNumber":157},{"declaringClass":"✽","methodName":"Then La peticion debe ser contestada por datacredito","fileName":"Authentication.feature","lineNumber":40}]},"result":"FAILURE","precondition":false}]},{"number":6,"description":"un usuario/a registrado en datacredito desea ser validado en un banco aval #2: {banco\u003dverde}","duration":2692,"startTime":"2018-10-17T15:26:31.627-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"children":[{"number":7,"description":"Given un usuario que esta registrado en datacredito solicita validacion en el banco verde","duration":2,"startTime":"2018-10-17T15:26:31.627-05:00[America/Bogota]","result":"SUCCESS","precondition":false},{"number":8,"description":"When el envia la peticion para ser autenticado","duration":2669,"startTime":"2018-10-17T15:26:31.629-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"children":[{"number":9,"description":"POST http://10.130.2.131:5133/id-now-services-snapshot/api/securityManagement/v7/Authentication","duration":0,"startTime":"2018-10-17T15:26:34.297-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"http://10.130.2.131:5133/id-now-services-snapshot/api/securityManagement/v7/Authentication","content":"{\n    \"govIssueIdent\": {\n        \"govIssueIdentType\": \"CC\",\n        \"govOrg\": \"string\",\n        \"stateProv\": \"string\",\n        \"country\": \"string\",\n        \"issDt\": \"2018-07-27T19:56:26.781Z\",\n        \"identSerialNum\": 19218095,\n        \"govOrgName\": \"string\",\n        \"expDt\": \"2018-07-27T19:56:26.781Z\",\n        \"govRank\": \"string\",\n        \"desc\": \"string\"\n    },\n    \"personName\": {\n        \"legalName\": \"Adriana\",\n        \"lastName\": \"FORERO\",\n        \"firstName\": \"Luz\",\n        \"nickname\": \"lquintero@ath.com.co\",\n        \"nameSuffix\": \"string\",\n        \"middleName\": \"Adriana\",\n        \"titlePrefix\": \"string\"\n    },\n    \"refInfo\": [\n        {\n            \"refType\": \"string\",\n            \"refId\": \"string\"\n        }\n    ],\n    \"creditAnalysis\": {\n        \"score\": 0\n    },\n    \"contactInfo\": {\n        \"prefTimeStart\": \"2018-07-27T19:56:26.781Z\",\n        \"contactName\": \"string\",\n        \"emailAddr\": \"string\",\n        \"postAddr\": {\n            \"Addr3\": \"string\",\n            \"stateProv\": \"string\",\n            \"Addr4\": \"string\",\n            \"StartDt\": \"2018-07-27T19:56:26.782Z\",\n            \"Addr1\": \"string\",\n            \"Addr2\": \"string\",\n            \"EndDt\": \"2018-07-27T19:56:26.782Z\",\n            \"city\": \"string\",\n            \"AddrType\": \"string\",\n            \"PostalCode\": 0,\n            \"Country\": \"string\"\n        },\n        \"prefTimeEnd\": \"2018-07-27T19:56:26.781Z\",\n        \"phoneNum\": {\n            \"phoneType\": \"string\",\n            \"phone\": \"3005501111\"\n        },\n        \"contactPref\": \"string\",\n        \"url\": \"string\"\n    },\n    \"depAcctId\": {\n        \"AcctCur\": \"string\",\n        \"AcctKey\": \"string\",\n        \"AcctId\": \"string\",\n        \"AcctType\": \"DDA\",\n        \"BankInfo\": {\n            \"stateProv\": \"string\",\n            \"refInfo\": {\n                \"refType\": \"string\",\n                \"refId\": \"string\"\n            },\n            \"branchId\": \"string\",\n            \"country\": \"string\",\n            \"bankId\": 0,\n            \"bankIdType\": \"string\",\n            \"city\": \"string\",\n            \"postAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"postalCode\": 0,\n            \"name\": \"string\",\n            \"branchName\": \"string\"\n        }\n    },\n    \"cardAcctId\": {\n        \"cardMagData\": {\n            \"MagData3\": \"string\",\n            \"MagData1\": \"string\",\n            \"MagData2\": \"string\"\n        },\n        \"acctType\": \"DDA\",\n        \"acctId\": \"string\",\n        \"CCMotoAcct\": {\n            \"CardVrfyData\": \"string\",\n            \"PostAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"phone\": 0,\n            \"postalCode\": 0,\n            \"ExpDt\": \"2018-07-27T19:56:26.781Z\",\n            \"brand\": \"string\",\n            \"Name\": \"string\"\n        }\n    },\n    \"loanAcctId\": {\n        \"bankInfo\": {\n            \"stateProv\": \"string\",\n            \"refInfo\": {\n                \"refType\": \"string\",\n                \"refId\": \"string\"\n            },\n            \"branchId\": \"string\",\n            \"country\": \"string\",\n            \"bankId\": 0,\n            \"bankIdType\": \"string\",\n            \"city\": \"string\",\n            \"postAddr\": {\n                \"Addr3\": \"string\",\n                \"stateProv\": \"string\",\n                \"Addr4\": \"string\",\n                \"StartDt\": \"2018-07-27T19:56:26.781Z\",\n                \"Addr1\": \"string\",\n                \"Addr2\": \"string\",\n                \"EndDt\": \"2018-07-27T19:56:26.781Z\",\n                \"city\": \"string\",\n                \"AddrType\": \"string\",\n                \"PostalCode\": 0,\n                \"Country\": \"string\"\n            },\n            \"postalCode\": 0,\n            \"name\": \"string\",\n            \"branchName\": \"string\"\n        },\n        \"acctType\": \"DDA\",\n        \"acctId\": \"string\"\n    },\n    \"otpInfo\": {\n        \"channel\": \"string\",\n        \"amt\": \"string\",\n        \"otpNum\": \"string\",\n        \"validity\": {\n            \"validityPeriod\": \"Año\",\n            \"ValidityTime\": 0\n        },\n        \"otpType\": \"TS\",\n        \"desc\": \"su  otp fue generada:\"\n    },\n    \"transaction\": {\n        \"trnRqUID\": \"string\",\n        \"trnType\": \"string\",\n        \"trnSrc\": \"string\"\n    },\n    \"signonPswd\": {\n        \"custPswd\": {\n            \"cryptType\": \"string\",\n            \"pswd\": \"string\"\n        },\n        \"signonRole\": \"string\",\n        \"custId\": {\n            \"custPermId\": \"string\",\n            \"SPName\": \"string\",\n            \"custLoginId\": \"string\"\n        },\n        \"genSessKey\": true\n    }\n}","contentType":"application/json","requestHeaders":"X-RqUID\u003d255763\n\t\t\t\tX-Channel\u003dADL\n\t\t\t\tX-BankId\u003d00010029\n\t\t\t\tX-IdentSerialNum\u003d0\n\t\t\t\tX-IPAddr\u003d127.0.0.1\n\t\t\t\tX-Sesskey\u003dsessionKey\n\t\t\t\tX-Backend\u003dElectronicSigInq\n\t\t\t\tX-OperationName\u003dautenticacion\n\t\t\t\tX-ServiceName\u003dautenticacion\n\t\t\t\tX-govIssueIdentType\u003dCC\n\t\t\t\tAccept\u003dapplication/json\n\t\t\t\tContent-Type\u003dapplication/json; charset\u003dUTF-8","requestCookies":"","responseHeaders":"X-Backside-Transport: OK OK\nConnection: Keep-Alive\nTransfer-Encoding: chunked\nDate: Wed, 17 Oct 2018 20:26:31 GMT\nContent-Type: application/json\nHost_code: \nstatusDes: \nX-Global-Transaction-ID: 1d78824b5bc79af701b0e4e7","responseCookies":"","responseBody":"{\n    \"msgRsHdr\": {\n        \"RqUID\": null,\n        \"Status\": {\n            \"StatusCode\": 500,\n            \"ServerStatusCode\": \"-1\",\n            \"Severity\": null,\n            \"StatusDesc\": \"Error El cliente ya ha generado una OTP y esta pendiente de validar\",\n            \"AdditionalStatus\": null\n        },\n        \"EndDt\": null,\n        \"ApprovalId\": null,\n        \"Fee\": null\n    },\n    \"otpInfo\": null,\n    \"personInfo\": null,\n    \"bankInfo\": {\n        \"bankIdType\": null,\n        \"bankId\": \"00010029\",\n        \"refInfo\": null,\n        \"name\": null,\n        \"branchId\": null,\n        \"branchName\": null,\n        \"postAddr\": null,\n        \"city\": null,\n        \"stateProv\": null,\n        \"postalCode\": null,\n        \"country\": null\n    },\n    \"trnImage\": null\n}","statusCode":200},"precondition":false}]},{"number":10,"description":"Then La peticion debe ser contestada por datacredito","duration":21,"startTime":"2018-10-17T15:26:34.298-05:00[America/Bogota]","exception":{"errorType":"java.lang.AssertionError","message":"\nExpected: \u003c0\u003e\n     but: was \u003c500\u003e","stackTrace":[{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationAssertions","methodName":"shouldSeeCodeDatacredito","fileName":"AuthenticationAssertions.java","lineNumber":31},{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationStepsDefinition","methodName":"requestDatacredito","fileName":"AuthenticationStepsDefinition.java","lineNumber":157},{"declaringClass":"✽","methodName":"Then La peticion debe ser contestada por datacredito","fileName":"Authentication.feature","lineNumber":40}]},"result":"FAILURE","precondition":false}]}],"userStory":{"id":"autenticacion","storyName":"Autenticacion","path":"Authentication.feature","narrative":"Para validar la autenticacion de un cliente en un banco del grupo aval\nyo como cliente que poseo productos en alguno de los bancos del grupo aval\nQuiero ser autenticado en un portal de los bancos del grupo aval","type":"feature"},"featureTag":{"name":"Autenticacion","type":"feature"},"title":"un usuario/a registrado en datacredito desea ser validado en un banco aval","description":"","tags":[{"name":"Autenticacion","type":"feature"},{"name":"datacredito","type":"tag"}],"startTime":"2018-10-17T15:26:27.847-05:00[America/Bogota]","duration":6472,"testFailureCause":{"errorType":"java.lang.AssertionError","message":"\nExpected: \u003c0\u003e\n     but: was \u003c500\u003e","stackTrace":[{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationAssertions","methodName":"shouldSeeCodeDatacredito","fileName":"AuthenticationAssertions.java","lineNumber":31},{"declaringClass":"co.com.ath.automation.features.steps.Authentication.AuthenticationStepsDefinition","methodName":"requestDatacredito","fileName":"AuthenticationStepsDefinition.java","lineNumber":157},{"declaringClass":"✽","methodName":"Then La peticion debe ser contestada por datacredito","fileName":"Authentication.feature","lineNumber":40}]},"testFailureClassname":"java.lang.AssertionError","testFailureMessage":"\nExpected: \u003c0\u003e\n     but: was \u003c500\u003e","testFailureSummary":"FAILURE;java.lang.AssertionError;\nExpected: \u003c0\u003e\n     but: was \u003c500\u003e;AuthenticationAssertions.java","projectKey":"","dataTable":{"headers":["banco"],"rows":[{"values":["azul"],"result":"FAILURE"},{"values":["verde"],"result":"FAILURE"}],"predefinedRows":true,"scenarioOutline":"Given un usuario que esta registrado en datacredito solicita validacion en el banco \u003cbanco\u003e\nWhen el envia la peticion para ser autenticado\nThen La peticion debe ser contestada por datacredito\n","dataSetDescriptors":[{"startRow":0,"rowCount":0,"name":"","description":""}]},"manual":false,"testSource":"Cucumber","result":"FAILURE"}